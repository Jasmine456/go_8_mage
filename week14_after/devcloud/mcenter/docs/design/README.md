# 用户中心

管理用户的登录和权限


## 用户认证

你是不是该系统的合法用户

### 服务端认证实现

基于Token的用户认证

+ 用户登录(颁发token)
+ 退出登录(撤销token)
+ 切换空间(切换token的空间属性)
  + 用户可以切换哪些空间, 由用户鉴权来决定


+ 用户管理: 管理系统所有的用户
  + 核心属性: 用户名/密码

### 认证中间件





## 用户鉴权

+ 用户在哪些空间


### 用户类型鉴权

用户中心 本身一个管理接口，是需要鉴权(用户中心的后台管理)

用户有没有权力来使用该功能， 用过一个HTTP 中间件 来拦截用户的Restful接口的请求, 通过判断用户的UserType和路由定义的Allow是否匹配

```go
	ws.Route(ws.POST("").To(h.CreateUser).
    // 是否需要认证用户
		Metadata(label.Auth, true).
    // 权限判断, 只有主账号能调用该接口
		Metadata(label.Allow, user.TYPE_PRIMARY).
```